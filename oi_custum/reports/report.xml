<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <report
        id="visite_report"
        model="crm_custum.visite"
        report_type="qweb-pdf"
        string="visite Report"
        name="crm_custum.visite_report_id"
        
    />

    <template id="visite_report_layout_id">
        <div class="header">
            <div class="row" style="report_header_style">
                 <div style="text-align: center;height:80px;">
                        <img src="/crm_custum/static/logo.png" class="img" style="height:80px;"/>
                    </div>
            </div>
        </div>
        <div class="article o_report_layout_standard">
            <t t-out="0" />
        </div>
    </template>

   <template id="visite_report_id">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <!--  <t t-call="web.internal_layout">  -->
           <t t-call="crm_custum.visite_report_layout_id">
                
                <div class="page">
                    

                    <div>
                        <h2 style="display: inline-block;">Fiche visite du client</h2>
                        <h2 style="display: inline-block; margin-left: 30%;">Date: <span t-field="o.date"/></h2>
                    </div>

                    <table style="width:99%;border:white 1px solid">
                        <tr>
                            <td style="width:50%;">
                                <table style="border:white 1px solid">
                                    <tr>
                                        <td><strong>Chantier </strong></td>
                                        <td> : <span t-field="o.chantier"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Objet de mission </strong></td>
                                        <td> : <span t-field="o.objet_mission"/></td>
                                    </tr>
                                </table>
                            </td>
                            <td style="width:50%;">
                                <table style="border:white 1px solid">
                                    <tr>
                                        <td style="width:20%;"><strong>Client</strong></td>
                                        <td> : <span t-field="o.lead_id.partner_id.name"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Adresse</strong></td>
                                        <td> :
                                            <span t-field="o.lead_id.partner_id.street"/>
                                            <span t-field="o.lead_id.partner_id.street2"/>
                                            <span t-field="o.lead_id.partner_id.city"/>
                                            <span t-field="o.lead_id.partner_id.state_id"/>
                                            <span t-field="o.lead_id.partner_id.zip"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>Phone</strong></td>
                                        <td> : <span t-field="o.lead_id.partner_id.phone"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Email</strong></td>
                                        <td> : <span t-field="o.lead_id.partner_id.email"/></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                       
                    </table>

                    <div style="height:200px; border:black 0.5px solid;margin-top:20px;padding-left:5px">
                        <h4 style="font-weight:bold; color:lightblue;margin-top:5px">BESOINS DU CLIENT</h4>
                        <table style="width:98%;height:150px;border:white 1px solid">
                            <tr>
                                <td style="width:150px;"><strong>Service </strong></td>
                                <td>: <span t-field="o.service"/></td>
                            </tr>
                            <tr>
                                <td style="width:150px;"><strong>Type d’installation </strong></td>
                                <td>: <span t-field="o.type_installation"/></td>
                            </tr>
                            <tr>
                                <td style="width:150px;"><strong>Autres </strong></td>
                                <td>: <span t-field="o.autres"/></td>
                            </tr>
                        </table>
                        
                    
                       
                    </div>

                    <div class="row mt32">
                        <div style="border:solid black 0.5px;padding-left:5px" class="col-xs-12">
                            <h4 style="font-weight:bold; color:lightblue;margin-top:10px" class="section-title">EXIGENCES CLIENT</h4>

                

                                <p  style="margin-top:10px;min-height:200px;width:98%;">
                                    <strong>Besoins : </strong>
                                    <span t-field="o.besoins"/>

                                </p>
                                <p style="min-height:80px;width:98%;">
                                    <strong>Observations :</strong>
                                    <span t-field="o.observations"/>

                                </p>
                            
                           
                        </div>
                    </div>

                    <div style="margin-top:20px;padding-left:5px;height:120px" class="additional-info">

                        <table style="border:white 1px solid;width:100%">
                            <tr>
                                <td style="width:40%">

                                    <table style="border:white 1px solid">
                                        <tr>
                                            <td style="width:50%"><strong>Fait à </strong></td>
                                            <td style="width:50%">: <!--<span style="margin-left:5px" t-esc="o.date"/>  --></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Par </strong></td>
                                            <td> : <span t-esc="o.write_uid.name"/></td>
                                        </tr>
                                       
                                    </table>

                                    
                                
                                </td>
                                <td style="width:50%">
                                
                                    <div style="display:inline-block;margin-left:30%"><strong>Le : </strong><!--<span style="margin-left:5px" t-esc="o.create_date"/> --> </div>
                                </td>
                            </tr>
                            
                        </table>
                        
                        <table style="border:white 1px solid;width:100%;margin-top:50px">
                            <tr style="width:100%">
                                <td style="width:13%"><strong>Signature </strong></td>
                                 <td style="width:85%"> : 
                                    <div style="heigth:200px">

                                        <img t-if="o.signature" t-att-src="'data:image/png;base64,%s' % o.signature.decode('utf-8')" style="width: 300px;"/>
                                    </div>
                                </td>

                            </tr>
                        </table>                       
                       
                    </div>
                </div>
               

            </t>
                
        </t>
    </t>
</template>

</odoo>
